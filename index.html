<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<title>åŒ—æµ·é“2026</title>
<style>
:root{--ice:#e3f2fd;--blue:#1976d2;--navy:#0d47a1;--orange:#ff6d00;--red:#e53935;--purple:#7c4dff;--green:#00c853;--gray:#546e7a;--light:#90a4ae;--bg:#f5f5f5}
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
html,body{height:100%;overflow:hidden}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:var(--bg);color:#263238;font-size:16px;line-height:1.5}
.app{display:flex;flex-direction:column;height:100%;max-width:500px;margin:0 auto;background:#fff;box-shadow:0 0 20px rgba(0,0,0,.1)}
.header{background:linear-gradient(135deg,var(--blue),var(--navy));color:#fff;padding:12px 16px;display:flex;align-items:center;gap:10px;flex-shrink:0}
.header-icon{font-size:28px}.header-title{font-size:18px;font-weight:700}.header-sub{font-size:12px;opacity:.85}
.header-sync{margin-left:auto;background:rgba(255,255,255,.2);border:none;color:#fff;width:36px;height:36px;border-radius:50%;font-size:18px;cursor:pointer}
.header-sync.loading{animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.content{flex:1;overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch}
.page{display:none;padding:16px;padding-bottom:80px;min-height:100%}.page.active{display:block}
.nav{position:fixed;bottom:0;left:50%;transform:translateX(-50%);width:100%;max-width:500px;background:#fff;display:flex;border-top:1px solid #e0e0e0;box-shadow:0 -2px 10px rgba(0,0,0,.05);z-index:100}
.nav-item{flex:1;padding:8px 4px;text-align:center;color:var(--gray);text-decoration:none}.nav-item.active{color:var(--blue)}
.nav-item span{display:block;font-size:22px;margin-bottom:2px}.nav-item small{font-size:10px}
.carousel{position:relative;width:100%;height:180px;overflow:hidden;background:linear-gradient(135deg,#e1bee7,#ce93d8)}
.carousel-inner{display:flex;transition:transform .4s ease;height:100%}
.carousel-slide{min-width:100%;height:100%}.carousel-slide img{width:100%;height:100%;object-fit:cover}
.carousel-btn{position:absolute;top:50%;transform:translateY(-50%);background:rgba(0,0,0,.4);color:#fff;border:none;width:32px;height:32px;border-radius:50%;font-size:16px;cursor:pointer;z-index:10}
.carousel-btn.prev{left:6px}.carousel-btn.next{right:6px}
.carousel-dots{position:absolute;bottom:8px;left:50%;transform:translateX(-50%);display:flex;gap:5px;z-index:10}
.carousel-dot{width:6px;height:6px;border-radius:50%;background:rgba(255,255,255,.5)}.carousel-dot.active{background:#fff;width:16px;border-radius:3px}
.carousel-counter{position:absolute;top:8px;right:8px;background:rgba(0,0,0,.5);color:#fff;padding:3px 8px;border-radius:10px;font-size:11px;z-index:10}
.hotel-card{background:#fff;border-radius:16px;margin-bottom:16px;box-shadow:0 2px 12px rgba(0,0,0,.08);overflow:hidden}
.hotel-header{padding:12px 16px;color:#fff;background:linear-gradient(135deg,var(--purple),#512da8)}
.hotel-header.warn{background:linear-gradient(135deg,#ff6d00,#f57c00)}
.hotel-date{font-size:12px;opacity:.9}.hotel-name{font-size:17px;font-weight:700;margin-top:2px}
.hotel-body{padding:16px}
.hotel-info{font-size:14px;color:var(--gray);line-height:1.8}
.hotel-desc{font-size:14px;color:#455a64;margin:12px 0;line-height:1.7;padding:12px;background:#f8f9fa;border-radius:10px}
.hotel-tags{display:flex;flex-wrap:wrap;gap:8px;margin-top:12px}
.hotel-tag{background:var(--ice);color:var(--blue);padding:4px 10px;border-radius:12px;font-size:13px}
.hotel-tag.warn{background:#fff3e0;color:#e65100}.hotel-tag.no{background:#ffebee;color:#c62828}
.hotel-nearby{margin-top:14px;padding-top:14px;border-top:1px dashed #e0e0e0}
.hotel-nearby-title{font-size:13px;font-weight:600;color:var(--gray);margin-bottom:10px}
.nearby-item{display:flex;align-items:center;gap:8px;padding:8px 0;font-size:14px;border-bottom:1px solid #f5f5f5}
.nearby-item:last-child{border-bottom:none}
.nearby-icon{font-size:18px}.nearby-name{flex:1;color:#455a64}.nearby-dist{color:var(--light);font-size:12px}
.nearby-nav{color:var(--green);font-size:13px;text-decoration:none;font-weight:500}
.hotel-price{display:flex;justify-content:space-between;align-items:center;margin-top:14px;padding-top:14px;border-top:1px dashed #e0e0e0}
.hotel-price-label{font-size:14px;color:var(--gray)}.hotel-price-value{font-size:20px;font-weight:700;color:var(--red)}
.hotel-nav-btn{display:flex;align-items:center;justify-content:center;gap:8px;width:100%;padding:12px;background:linear-gradient(135deg,var(--green),#00e676);color:#fff;border:none;border-radius:12px;font-size:15px;font-weight:600;cursor:pointer;margin-top:14px;text-decoration:none}
.spot-card{background:#fff;border-radius:16px;margin-bottom:16px;box-shadow:0 2px 12px rgba(0,0,0,.08);overflow:hidden}
.spot-body{padding:16px}
.spot-region{display:inline-block;background:var(--blue);color:#fff;padding:4px 12px;border-radius:12px;font-size:12px;margin-bottom:10px}
.spot-name{font-size:20px;font-weight:700}.spot-jp{font-size:14px;color:var(--light);margin-top:2px}
.spot-desc{font-size:15px;color:var(--gray);margin:12px 0;line-height:1.7}
.spot-info-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin:12px 0;padding:12px;background:var(--ice);border-radius:12px}
.spot-info-item{font-size:14px}.spot-info-label{color:var(--light);font-size:12px}.spot-info-value{font-weight:600;margin-top:2px}
.spot-tips{background:#fff3e0;border-radius:12px;padding:12px;margin:12px 0}
.spot-tips-title{font-size:13px;font-weight:600;color:var(--orange);margin-bottom:6px}
.spot-tips-content{font-size:14px;color:#795548;line-height:1.6}
.spot-nav-btn{display:flex;align-items:center;justify-content:center;gap:8px;width:100%;padding:14px;background:linear-gradient(135deg,var(--green),#00e676);color:#fff;border:none;border-radius:12px;font-size:16px;font-weight:600;cursor:pointer;margin-top:12px;text-decoration:none}
.card{background:#fff;border-radius:16px;margin-bottom:16px;box-shadow:0 2px 12px rgba(0,0,0,.08);overflow:hidden}
.card-header{padding:14px 16px;color:#fff;background:linear-gradient(135deg,var(--blue),var(--navy))}
.card-title{font-size:17px;font-weight:700}.card-sub{font-size:13px;opacity:.9;margin-top:2px}
.card-body{padding:16px}
.timeline{position:relative;padding-left:24px}
.timeline::before{content:'';position:absolute;left:7px;top:4px;bottom:4px;width:2px;background:linear-gradient(var(--ice),var(--blue))}
.tl-item{position:relative;padding-bottom:16px}.tl-item:last-child{padding-bottom:0}
.tl-dot{position:absolute;left:-20px;top:4px;width:12px;height:12px;background:#fff;border:3px solid var(--blue);border-radius:50%}
.tl-item.meal .tl-dot{border-color:var(--orange)}.tl-item.hotel .tl-dot{border-color:var(--purple)}
.tl-time{font-size:13px;color:var(--light);font-weight:500}
.tl-title{font-size:16px;font-weight:600;margin:2px 0}.tl-desc{font-size:14px;color:var(--gray)}
.tl-link{display:inline-flex;align-items:center;gap:4px;margin-top:6px;padding:6px 12px;background:var(--ice);color:var(--blue);text-decoration:none;border-radius:20px;font-size:13px}
.day-selector{display:flex;gap:8px;overflow-x:auto;padding-bottom:16px;margin-bottom:16px;-webkit-overflow-scrolling:touch}
.day-selector::-webkit-scrollbar{display:none}
.day-btn{flex-shrink:0;width:50px;padding:12px 8px;background:#fff;border:2px solid #e0e0e0;border-radius:12px;text-align:center;cursor:pointer}
.day-btn.active{background:var(--blue);border-color:var(--blue);color:#fff}
.day-btn-num{font-size:18px;font-weight:700}.day-btn-date{font-size:10px;opacity:.7;margin-top:2px}
.trans-box{background:#fff;border-radius:16px;margin-bottom:12px;box-shadow:0 2px 12px rgba(0,0,0,.08);padding:16px}
.trans-title{font-size:16px;font-weight:700;margin-bottom:12px}
.trans-row{display:flex;justify-content:space-between;padding:10px 0;border-bottom:1px solid #f0f0f0;font-size:15px}
.trans-row:last-child{border-bottom:none}
.trans-label{color:var(--gray)}.trans-value{font-weight:600}.trans-value.red{color:var(--red)}
.route-table{width:100%;border-collapse:collapse;font-size:14px;margin-top:12px}
.route-table th,.route-table td{padding:10px 8px;text-align:left}
.route-table thead{background:var(--ice)}.route-table tbody tr{border-bottom:1px solid #f0f0f0}
.route-table tfoot{background:var(--navy);color:#fff}
.route-table td:last-child,.route-table th:last-child{text-align:right}
.phrase-tabs{display:flex;gap:8px;overflow-x:auto;padding-bottom:12px;margin-bottom:16px}
.phrase-tabs::-webkit-scrollbar{display:none}
.phrase-tab{flex-shrink:0;padding:10px 16px;background:#fff;border:2px solid #e0e0e0;border-radius:25px;font-size:14px;color:var(--gray);cursor:pointer}
.phrase-tab.active{background:var(--blue);border-color:var(--blue);color:#fff}
.phrase-card{background:#fff;border-radius:16px;margin-bottom:12px;padding:16px;box-shadow:0 2px 12px rgba(0,0,0,.08);border-left:4px solid var(--blue);cursor:pointer}
.phrase-card.driving{border-color:var(--green)}.phrase-card.restaurant{border-color:var(--orange)}
.phrase-card.onsen{border-color:#ffab91}.phrase-card.shopping{border-color:var(--purple)}.phrase-card.emergency{border-color:var(--red)}
.phrase-jp{font-size:18px;font-weight:700}.phrase-romaji{font-size:13px;color:var(--light);font-style:italic;margin:4px 0}
.phrase-zh{font-size:15px;color:var(--gray)}.phrase-play{display:flex;align-items:center;gap:6px;margin-top:10px;color:var(--blue);font-size:14px}
.budget-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-bottom:16px}
.budget-card{background:#fff;border-radius:16px;padding:14px 10px;text-align:center;box-shadow:0 2px 12px rgba(0,0,0,.08)}
.budget-card.total{grid-column:span 3;background:linear-gradient(135deg,var(--blue),var(--navy));color:#fff}
.budget-icon{font-size:24px;margin-bottom:4px}.budget-label{font-size:12px;opacity:.7}.budget-value{font-size:16px;font-weight:700;margin-top:2px}
.expense-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
.expense-title{font-size:17px;font-weight:700}
.expense-add-btn{background:var(--green);color:#fff;border:none;padding:10px 20px;border-radius:25px;font-size:15px;font-weight:600;cursor:pointer}
.expense-status{display:flex;align-items:center;gap:6px;font-size:13px;padding:6px 12px;border-radius:20px;margin-bottom:12px}
.expense-status.online{background:#e8f5e9;color:#2e7d32}.expense-status.offline{background:#fff3e0;color:#e65100}.expense-status.error{background:#ffebee;color:#c62828}
.expense-cats{display:flex;gap:8px;overflow-x:auto;padding-bottom:12px;margin-bottom:12px}
.expense-cats::-webkit-scrollbar{display:none}
.expense-cat{flex-shrink:0;padding:8px 14px;border-radius:20px;font-size:14px;cursor:pointer}.expense-cat.active{box-shadow:0 2px 8px rgba(0,0,0,.2)}
.expense-list{background:#fff;border-radius:16px;box-shadow:0 2px 12px rgba(0,0,0,.08);overflow:hidden}
.expense-item{display:flex;justify-content:space-between;align-items:center;padding:14px 16px;border-bottom:1px solid #f0f0f0}
.expense-item:last-child{border-bottom:none}
.expense-left{display:flex;align-items:center;gap:12px}
.expense-icon{width:40px;height:40px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:20px}
.expense-desc{font-size:15px;font-weight:500}.expense-date{font-size:12px;color:var(--light);margin-top:2px}
.expense-amount{font-size:17px;font-weight:700}.expense-amount.twd{color:var(--red)}.expense-amount.jpy{color:var(--blue)}
.expense-delete{background:none;border:none;font-size:20px;color:var(--light);padding:8px;cursor:pointer}
.expense-empty{text-align:center;padding:40px 20px;color:var(--light)}
.info-card{background:#fff;border-radius:16px;margin-bottom:12px;box-shadow:0 2px 12px rgba(0,0,0,.08);overflow:hidden}
.info-header{padding:14px 16px;font-size:16px;font-weight:700;background:var(--ice)}
.info-body{padding:4px 0}
.info-row{display:flex;justify-content:space-between;padding:12px 16px;border-bottom:1px solid #f0f0f0;font-size:15px}
.info-row:last-child{border-bottom:none}
.info-label{color:var(--gray)}.info-value{font-weight:500}
.emergency-box{background:var(--red);color:#fff;padding:16px;text-align:center;margin:12px 16px;border-radius:12px}
.emergency-box h4{font-size:13px;opacity:.9}.emergency-box p{font-size:28px;font-weight:700;margin-top:4px}
.setup-card{background:#fff;border-radius:16px;padding:20px;margin-bottom:16px;box-shadow:0 2px 12px rgba(0,0,0,.08);border:2px dashed var(--orange)}
.setup-title{font-size:17px;font-weight:700;color:var(--orange);margin-bottom:12px}
.setup-steps{font-size:14px;color:var(--gray);line-height:2}
.setup-input{width:100%;padding:14px;border:2px solid #e0e0e0;border-radius:12px;font-size:15px;margin:12px 0}
.setup-input:focus{outline:none;border-color:var(--blue)}
.setup-btns{display:flex;gap:10px}
.setup-btn{flex:1;padding:14px;border:none;border-radius:12px;font-size:15px;font-weight:600;cursor:pointer}
.setup-btn.primary{background:var(--green);color:#fff}.setup-btn.secondary{background:var(--blue);color:#fff}
.setup-status{margin-top:12px;padding:12px;border-radius:10px;font-size:14px}
.setup-status.success{background:#e8f5e9;color:#2e7d32}.setup-status.error{background:#ffebee;color:#c62828}
.backup-box{background:linear-gradient(135deg,#fff3e0,#ffe0b2);border:2px solid var(--orange);border-radius:16px;padding:16px;margin-top:16px}
.backup-title{font-size:15px;font-weight:700;color:var(--orange);margin-bottom:6px}
.backup-text{font-size:14px;color:#795548}
.modal{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);z-index:200;justify-content:center;align-items:flex-end}
.modal.active{display:flex}
.modal-content{background:#fff;width:100%;max-width:500px;border-radius:24px 24px 0 0;padding:24px;padding-bottom:40px;max-height:90vh;overflow-y:auto}
.modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}
.modal-title{font-size:20px;font-weight:700}
.modal-close{background:none;border:none;font-size:28px;color:var(--light);cursor:pointer}
.form-group{margin-bottom:16px}
.form-label{display:block;font-size:14px;font-weight:500;margin-bottom:8px;color:var(--gray)}
.form-input,.form-select{width:100%;padding:14px;border:2px solid #e0e0e0;border-radius:12px;font-size:16px;background:#fff}
.form-input:focus,.form-select:focus{outline:none;border-color:var(--blue)}
.form-submit{width:100%;padding:16px;background:var(--blue);color:#fff;border:none;border-radius:12px;font-size:17px;font-weight:700;cursor:pointer}
.toast{position:fixed;bottom:100px;left:50%;transform:translateX(-50%);background:#333;color:#fff;padding:14px 24px;border-radius:25px;font-size:15px;z-index:300;opacity:0;transition:opacity .3s;pointer-events:none}
.toast.show{opacity:1}.toast.success{background:#4caf50}.toast.error{background:#f44336}
@media(max-width:400px){.budget-grid{grid-template-columns:repeat(2,1fr)}.budget-card.total{grid-column:span 2}}
</style>
</head>
<body>
<div class="app">
  <header class="header">
    <div class="header-icon">ğŸ¦Š</div>
    <div><div class="header-title">åŒ—æµ·é“è‡ªé§•ä¹‹æ—…</div><div class="header-sub">2026/1/28-2/4 ï½œ 4äºº</div></div>
    <button class="header-sync" id="header-sync" onclick="syncData()">ğŸ”„</button>
  </header>
  <div class="content">
    <div class="page active" id="page-itinerary"><div class="day-selector" id="day-selector"></div><div id="day-content"></div><div class="backup-box"><div class="backup-title">âš ï¸ å‚™æ¡ˆè¨ˆç•«</div><div class="backup-text">è‹¥ç¬¬1å¤©ç­æ©Ÿå•é¡Œï¼Œå¯å–æ¶ˆå¯Œè‰¯é‡ä½å®¿ï¼Œç¬¬2å¤©å¾æ©Ÿå ´ç›´æ¥åˆ°æ—­å·ã€‚</div></div></div>
    <div class="page" id="page-hotels"></div>
    <div class="page" id="page-spots"></div>
    <div class="page" id="page-transport"></div>
    <div class="page" id="page-phrases"><div class="phrase-tabs" id="phrase-tabs"></div><div id="phrases-list"></div></div>
    <div class="page" id="page-budget"><div id="setup-section"></div><div class="budget-grid" id="budget-grid"></div><div class="expense-header"><div class="expense-title">ğŸ“ æ¶ˆè²»è¨˜éŒ„</div><button class="expense-add-btn" onclick="openModal()">ï¼‹ æ–°å¢</button></div><div class="expense-status" id="conn-status"><span>â³</span> æœªé€£ç·š</div><div class="expense-cats" id="expense-cats"></div><div class="expense-list" id="expense-list"><div class="expense-empty">è«‹å…ˆè¨­å®š Google Sheets</div></div></div>
    <div class="page" id="page-info"></div>
  </div>
  <nav class="nav">
    <a class="nav-item active" data-page="itinerary"><span>ğŸ“…</span><small>è¡Œç¨‹</small></a>
    <a class="nav-item" data-page="hotels"><span>ğŸ¨</span><small>ä½å®¿</small></a>
    <a class="nav-item" data-page="spots"><span>ğŸ“</span><small>æ™¯é»</small></a>
    <a class="nav-item" data-page="transport"><span>ğŸš—</span><small>äº¤é€š</small></a>
    <a class="nav-item" data-page="phrases"><span>ğŸ’¬</span><small>æœƒè©±</small></a>
    <a class="nav-item" data-page="budget"><span>ğŸ’°</span><small>è¨˜å¸³</small></a>
    <a class="nav-item" data-page="info"><span>â„¹ï¸</span><small>è³‡è¨Š</small></a>
  </nav>
</div>
<div class="modal" id="modal">
  <div class="modal-content">
    <div class="modal-header"><div class="modal-title">ğŸ’° æ–°å¢æ¶ˆè²»</div><button class="modal-close" onclick="closeModal()">Ã—</button></div>
    <form onsubmit="addExpense(event)">
      <div class="form-group"><label class="form-label">æ—¥æœŸ</label><input type="date" class="form-input" id="f-date" required></div>
      <div class="form-group"><label class="form-label">åˆ†é¡</label><select class="form-select" id="f-cat"><option value="flight">âœˆï¸ æ©Ÿç¥¨</option><option value="hotel">ğŸ¨ ä½å®¿</option><option value="car">ğŸš— ç§Ÿè»Š</option><option value="food">ğŸ½ï¸ é¤é£²</option><option value="ticket">ğŸ« é–€ç¥¨</option><option value="shopping">ğŸ›ï¸ è³¼ç‰©</option><option value="other">ğŸ“¦ å…¶ä»–</option></select></div>
      <div class="form-group"><label class="form-label">èªªæ˜</label><input type="text" class="form-input" id="f-desc" placeholder="ä¾‹ï¼šæ—­å±±å‹•ç‰©åœ’é–€ç¥¨" required></div>
      <div class="form-group"><label class="form-label">å¹£åˆ¥</label><select class="form-select" id="f-cur"><option value="TWD">NT$ æ–°å°å¹£</option><option value="JPY">Â¥ æ—¥åœ“</option></select></div>
      <div class="form-group"><label class="form-label">é‡‘é¡</label><input type="number" class="form-input" id="f-amt" placeholder="0" required></div>
      <button type="submit" class="form-submit" id="submit-btn">æ–°å¢æ¶ˆè²»</button>
    </form>
  </div>
</div>
<div class="toast" id="toast"></div>
<script>
const STORAGE_KEY='hokkaido2026_api',IMG_BASE='./images/';
let API_URL=localStorage.getItem(STORAGE_KEY)||'',expenses=[],isOnline=false,currentDay=1,currentPhraseFilter='all',currentExpenseFilter='all';

const hotels=[
  {id:'laterre',date:'1/28',nights:'1æ™š',name:'å¯Œè‰¯é‡æ‹‰æ¼æ‘é…’åº—',jp:'ãµã‚‰ã®ãƒ©ãƒ†ãƒ¼ãƒ«',location:'åŒ—æµ·é“ç©ºçŸ¥éƒ¡ä¸­å¯Œè‰¯é‡ç”ºæ±1ç·šåŒ—18å·',room:'4äººæ¦»æ¦»ç±³',booking:'EZè¨‚æˆ¿',images:[IMG_BASE+'laterre-1.jpg',IMG_BASE+'laterre-2.jpg',IMG_BASE+'laterre-3.jpg'],desc:'100%å¤©ç„¶æº«æ³‰ï¼Œå¯çœºæœ›åå‹å²³é€£å³°ã€‚å®¤å…§æœ‰15ç¨®æº«æ³‰æµ´æ§½ï¼Œéœ²å¤©é¢¨å‘‚å¯è³é›ªæ™¯ã€‚ä½¿ç”¨ç•¶åœ°æ–°é®®è”¬èœçš„æ–™ç†ä¹Ÿå¾ˆå—æ­¡è¿ã€‚',tags:['â™¨ï¸æº«æ³‰','ğŸ³æ—©é¤','ğŸ½ï¸æ™šé¤','ğŸ…¿ï¸å…è²»åœè»Š'],nearby:[{icon:'ğŸª',name:'Seicomartä¾¿åˆ©å•†åº—',dist:'è»Šç¨‹5åˆ†',nav:'ã‚»ã‚¤ã‚³ãƒ¼ãƒãƒ¼ãƒˆä¸­å¯Œè‰¯é‡'},{icon:'ğŸœ',name:'å”¯æˆ‘ç¨å°Šå’–å“©',dist:'è»Šç¨‹10åˆ†',nav:'å”¯æˆ‘ç‹¬å°Š å¯Œè‰¯é‡'},{icon:'ğŸŒ¸',name:'å¯Œç”°è¾²å ´',dist:'è»Šç¨‹8åˆ†',nav:'ãƒ•ã‚¡ãƒ¼ãƒ å¯Œç”°'}],price:7000},
  {id:'asahikawa',date:'1/29',nights:'1æ™š',name:'æ—­å·å®¢æ¨‚æ£®é…’åº—',jp:'ã‚¯ãƒ¬ãƒƒã‚»ãƒ³ãƒˆæ—­å·',location:'åŒ—æµ·é“æ—­å·å¸‚5æ¡é€š8ä¸ç›®',room:'2é–“é›™äººæˆ¿',booking:'Agoda',extra:'æ—©é¤Â¥1,760Ã—2',images:[IMG_BASE+'asahikawa-h-1.jpg',IMG_BASE+'asahikawa-h-2.jpg',IMG_BASE+'asahikawa-h-3.jpg'],desc:'ä½æ–¼æ—­å·å¸‚ä¸­å¿ƒï¼Œé„°è¿‘å¹³å’Œé€šè²·ç‰©å…¬åœ’å•†åº—è¡—ã€‚æ­¥è¡Œå¯åˆ°å¤šé–“é¤å»³å’Œè³¼ç‰©ä¸­å¿ƒã€‚',tags:['â™¨ï¸æº«æ³‰','ğŸ…¿ï¸ä»˜è²»åœè»Š'],nearby:[{icon:'ğŸª',name:'Lawsonä¾¿åˆ©å•†åº—',dist:'æ­¥è¡Œ1åˆ†',nav:'ãƒ­ãƒ¼ã‚½ãƒ³æ—­å·äº”æ¡é€š'},{icon:'ğŸ›’',name:'AEONè³¼ç‰©ä¸­å¿ƒ',dist:'æ­¥è¡Œ5åˆ†',nav:'ã‚¤ã‚ªãƒ³æ—­å·é§…å‰'},{icon:'ğŸ–',name:'å¤§é»‘å±‹æˆå‰æ€æ±—',dist:'æ­¥è¡Œ8åˆ†',nav:'å¤§é»’å±‹ æ—­å·'},{icon:'ğŸ”§',name:'DCM(è²·é‹é‡˜)',dist:'è»Šç¨‹10åˆ†',nav:'DCMãƒ›ãƒ¼ãƒãƒƒã‚¯æ—­å·'}],price:4643},
  {id:'sounkyo',date:'1/30',nights:'1æ™š',name:'å±¤é›²å³½æœé™½äº­',jp:'å±¤é›²å³¡æœé™½äº­',location:'åŒ—æµ·é“ä¸Šå·éƒ¡ä¸Šå·ç”ºå±¤é›²å³¡æ¸©æ³‰',room:'4äººæˆ¿5åºŠ',booking:'æš«EZ',images:[IMG_BASE+'sounkyo-h-1.jpg',IMG_BASE+'sounkyo-h-2.jpg',IMG_BASE+'sounkyo-h-3.jpg'],desc:'åè½æ–¼ç¾¤å±±ç’°æŠ±ä¸­çš„å±±å²³åº¦å‡é£¯åº—ã€‚å¤©ç©ºéœ²å¤©ã€Œæœé™½å±±ã€å¯çœºæœ›å±¤é›²å³½æºªè°·ç¾æ™¯ã€‚é™„è¿‘ç„¡å•†åº—ï¼Œä½†é£¯åº—å…§æœ‰åœŸç”¢åº—ã€å±…é…’å±‹ã€éºµåº—ã€‚',tags:['â™¨ï¸æº«æ³‰','ğŸ³æ—©é¤','ğŸ½ï¸æ™šé¤','ğŸ…¿ï¸å…è²»åœè»Š'],nearby:[{icon:'ğŸª',name:'é£¯åº—å…§åœŸç”¢åº—',dist:'é¤¨å…§1F',nav:''},{icon:'ğŸœ',name:'é£¯åº—å…§æ‹‰éºµåº—',dist:'é¤¨å…§B1',nav:''},{icon:'ğŸ§Š',name:'å†°ç€‘ç¥­æœƒå ´',dist:'æ­¥è¡Œ10åˆ†',nav:'å±¤é›²å³¡æ°·ç€‘ã¾ã¤ã‚Š'}],price:9591},
  {id:'akan',date:'1/31',nights:'1æ™š',name:'æ–°é˜¿å¯’é£¯åº—',jp:'ãƒ‹ãƒ¥ãƒ¼é˜¿å¯’ãƒ›ãƒ†ãƒ«',location:'åŒ—æµ·é“é‡§è·¯å¸‚é˜¿å¯’ç”ºé˜¿å¯’æ¹–æ¸©æ³‰2-8-8',room:'4äººå’Œå®¤',booking:'EZè¨‚æˆ¿',images:[IMG_BASE+'akan-h-1.jpg',IMG_BASE+'akan-h-2.jpg',IMG_BASE+'akan-h-3.jpg'],desc:'é˜¿å¯’æ¹–ç•”é«˜ç´šæº«æ³‰é£¯åº—ï¼Œæˆ¿é–“å¯çœºæœ›æ¹–æ™¯èˆ‡é›„é˜¿å¯’å²³ã€‚å±‹é ‚æœ‰ç©ºä¸­èŠ±åœ’æº«æ³‰å’Œæ³³æ± ã€‚é£¯åº—å°é¢æœ‰ä¾¿åˆ©å•†åº—ï¼',tags:['â™¨ï¸æº«æ³‰','ğŸ³æ—©é¤','ğŸ½ï¸æ™šé¤','ğŸŠæ³³æ± ','ğŸ…¿ï¸å…è²»åœè»Š'],nearby:[{icon:'ğŸª',name:'Lawsonä¾¿åˆ©å•†åº—',dist:'é£¯åº—å°é¢',nav:'ãƒ­ãƒ¼ã‚½ãƒ³é˜¿å¯’æ¹–æ¸©æ³‰'},{icon:'ğŸ’Š',name:'è—¥å¦åº—',dist:'æ­¥è¡Œ2åˆ†',nav:'é˜¿å¯’æ¹–æ¸©æ³‰å•†åº—è¡—'},{icon:'ğŸ˜ï¸',name:'æ„›åŠªæ‘è½Kotan',dist:'æ­¥è¡Œ8åˆ†',nav:'é˜¿å¯’æ¹–ã‚¢ã‚¤ãƒŒã‚³ã‚¿ãƒ³'},{icon:'ğŸš¢',name:'é˜¿å¯’æ¹–éŠè¦½èˆ¹',dist:'æ­¥è¡Œ5åˆ†',nav:'é˜¿å¯’è¦³å…‰æ±½èˆ¹'}],price:10545},
  {id:'tokachi',date:'2/1',nights:'1æ™š',name:'åå‹å·Tetra Resort',jp:'ãƒ†ãƒˆãƒ©ãƒªã‚¾ãƒ¼ãƒˆåå‹å·',location:'åŒ—æµ·é“æ²³æ±éƒ¡éŸ³æ›´ç”ºåå‹å·æ¸©æ³‰åŒ—9-1',room:'4äººæˆ¿',booking:'Agoda',images:[IMG_BASE+'tokachi-1.jpg',IMG_BASE+'tokachi-2.jpg',IMG_BASE+'tokachi-3.jpg'],desc:'ä½æ–¼ç™½é³¥é£›ä¾†çš„åå‹å·æ²³ç•”ã€‚è‡ªå®¶æºæ³‰å¤©ç„¶æº«æ³‰æ°´è³ªæŸ”æ»‘ã€‚å‘¨é‚Šè¼ƒåï¼Œå»ºè­°å…ˆåœ¨å¸¶å»£å¸‚å€ç”¨é¤è³¼ç‰©ã€‚',tags:['ğŸ›æµ´å ´','ğŸ³æ—©é¤','ğŸ…¿ï¸å…è²»åœè»Š'],nearby:[{icon:'ğŸª',name:'Seicomartä¾¿åˆ©å•†åº—',dist:'è»Šç¨‹5åˆ†',nav:'ã‚»ã‚¤ã‚³ãƒ¼ãƒãƒ¼ãƒˆéŸ³æ›´æœ¨é‡'},{icon:'âœ¨',name:'åå‹å·å½©ç‡ˆç¥­',dist:'æ­¥è¡Œ10åˆ†',nav:'å½©å‡›è¯åå‹å·æ¸©æ³‰'},{icon:'ğŸ¦¢',name:'ç™½é³¥é£›ä¾†åœ°',dist:'æ­¥è¡Œ15åˆ†',nav:'åå‹å·ç™½é³¥é£›æ¥åœ°'}],price:4643},
  {id:'vessel',date:'2/2',nights:'1æ™š',name:'æœ­å¹ŒVessel Inn',jp:'ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³æœ­å¹Œä¸­å³¶å…¬åœ’',location:'åŒ—æµ·é“æœ­å¹Œå¸‚ä¸­å¤®åŒºå—9æ¡è¥¿4-1-2',room:'2é–“é›™äººæˆ¿',booking:'Klook',images:[IMG_BASE+'vessel-1.jpg',IMG_BASE+'vessel-2.jpg',IMG_BASE+'vessel-3.jpg'],desc:'å…¨æ—¥æœ¬é£¯åº—æ—©é¤æ’è¡Œç¬¬4åï¼æµ·é®®ä¸¼è‡ªåŠ©æ—©é¤è¶…è±ç››ã€‚ä½æ–¼ä¸­å³¶å…¬åœ’ç«™æ—æ­¥è¡Œ1åˆ†ã€‚åˆ°è–„é‡1ç«™ã€ç‹¸å°è·¯æ­¥è¡Œ10åˆ†ã€‚',tags:['ğŸ³è¶…å¼·æ—©é¤','ğŸš‡äº¤é€šä¾¿åˆ©'],warn:true,nearby:[{icon:'ğŸª',name:'Lawsonä¾¿åˆ©å•†åº—',dist:'é£¯åº—å°é¢',nav:'ãƒ­ãƒ¼ã‚½ãƒ³æœ­å¹Œå—ä¹æ¡è¥¿'},{icon:'ğŸ¦€',name:'å†°é›ªä¹‹é–€èƒèŸ¹',dist:'æ­¥è¡Œ10åˆ†',nav:'æ°·é›ªã®é–€æœ­å¹Œ'},{icon:'ğŸ›ï¸',name:'ç‹¸å°è·¯å•†åº—è¡—',dist:'æ­¥è¡Œ10åˆ†',nav:'ç‹¸å°è·¯å•†åº—è¡—'},{icon:'â„ï¸',name:'å¤§é€šå…¬åœ’é›ªç¥­',dist:'åœ°éµ2ç«™',nav:'å¤§é€šå…¬åœ’æœ­å¹Œ'}],price:5400},
  {id:'chitose',date:'2/3',nights:'1æ™š',name:'åƒæ­²æ‚ éŠé¤¨',jp:'åƒæ­³ãƒ›ãƒ†ãƒ«éŠæ‚ é¤¨',location:'åŒ—æµ·é“åƒæ­³å¸‚åŒ—æ „2ä¸ç›®',room:'4äººä¸Šä¸‹åºŠ',booking:'EZè¨‚æˆ¿',images:[IMG_BASE+'chitose-1.jpg',IMG_BASE+'chitose-2.jpg',IMG_BASE+'chitose-3.jpg'],desc:'è·é›¢æ–°åƒæ­²æ©Ÿå ´è»Šç¨‹15åˆ†é˜ï¼Œæœ€å¾Œä¸€æ™šä½é€™æœ€æ–¹ä¾¿è¶•é£›æ©Ÿã€‚æœ‰å¤§æµ´å ´å¯æ³¡æ¹¯ã€‚',tags:['ğŸ›æµ´å ´','ğŸ…¿ï¸å…è²»åœè»Š'],no:true,nearby:[{icon:'ğŸª',name:'7-11ä¾¿åˆ©å•†åº—',dist:'æ­¥è¡Œ3åˆ†',nav:'ã‚»ãƒ–ãƒ³ã‚¤ãƒ¬ãƒ–ãƒ³åƒæ­³åŒ—æ „'},{icon:'ğŸ›’',name:'AEON Mall',dist:'æ­¥è¡Œ5åˆ†',nav:'ã‚¤ã‚ªãƒ³åƒæ­³'},{icon:'ğŸ£',name:'è¿´è½‰å£½å¸',dist:'æ­¥è¡Œ5åˆ†',nav:'å›è»¢å¯¿å¸åƒæ­³'},{icon:'âœˆï¸',name:'æ–°åƒæ­²æ©Ÿå ´',dist:'è»Šç¨‹15åˆ†',nav:'æ–°åƒæ­³ç©ºæ¸¯'}],price:4033}
];

const spots=[
  {id:'ningle',region:'å¯Œè‰¯é‡',name:'ğŸ§š ç²¾éˆéœ²å°',jp:'ãƒ‹ãƒ³ã‚°ãƒ«ãƒ†ãƒ©ã‚¹',images:[IMG_BASE+'ningle-1.jpg',IMG_BASE+'ningle-2.jpg',IMG_BASE+'ningle-3.jpg'],desc:'æ£®æ—ä¸­ç´„15é–“å¤¢å¹»å°æœ¨å±‹ã€‚å†¬å­£å¤œé–“é»ç‡ˆå¾Œå¦‚ç«¥è©±ä¸–ç•Œã€‚',address:'åŒ—æµ·é“å¯Œè‰¯é‡å¸‚ä¸­å¾¡æ–™',hours:'12:00-20:45',price:'å…è²»',tips:'å»ºè­°ä¸‹åˆ4é»å¾Œä¾†ï¼Œå¯åŒæ™‚æ‹æ—¥æ™¯å’Œå¤œé–“é»ç‡ˆã€‚',nav:'ãƒ‹ãƒ³ã‚°ãƒ«ãƒ†ãƒ©ã‚¹å¯Œè‰¯é‡'},
  {id:'biei',region:'ç¾ç‘›',name:'ğŸŒ² ç¾ç‘›åæ¨¹å·¡ç¦®',jp:'ç¾ç‘›ã®ä¸˜',images:[IMG_BASE+'biei-1.jpg',IMG_BASE+'biei-2.jpg',IMG_BASE+'biei-3.jpg'],desc:'ç¾ç‘›ä¸˜é™µä¸Šçš„ç¨ç«‹æ¨¹æœ¨ï¼Œè–èª•æ¨¹ã€Kenèˆ‡Maryä¹‹æ¨¹ã€ä¸ƒæ˜Ÿä¹‹æ¨¹ã€‚',address:'åŒ—æµ·é“ä¸Šå·éƒ¡ç¾ç‘›ç”º',hours:'å…¨å¤©',price:'å…è²»',tips:'è«‹å‹¿é€²å…¥è¾²åœ°æ‹ç…§ã€‚å†¬å­£é“è·¯æ¿•æ»‘æ³¨æ„å®‰å…¨ã€‚',nav:'ç¾ç‘›ã‚¯ãƒªã‚¹ãƒã‚¹ãƒ„ãƒªãƒ¼ã®æœ¨'},
  {id:'asahiyama',region:'æ—­å·',name:'ğŸ§ æ—­å±±å‹•ç‰©åœ’',jp:'ã‚ã•ã²ã‚„ã¾ã©ã†ã¶ã¤ãˆã‚“',images:[IMG_BASE+'asahiyama-1.jpg',IMG_BASE+'asahiyama-2.jpg',IMG_BASE+'asahiyama-3.jpg'],desc:'æ—¥æœ¬æœ€åŒ—ç«¯å‹•ç‰©åœ’ï¼Œå†¬å­£é™å®šã€Œä¼éµæ•£æ­¥ã€è¶…ç™‚ç™’ï¼',address:'åŒ—æµ·é“æ—­å·å¸‚æ±æ—­å·ç”ºå€‰æ²¼',hours:'å†¬å­£10:30-15:30',price:'Â¥1,000',tips:'ä¼éµæ•£æ­¥11:00ã€14:30ï¼ˆæå‰30åˆ†é˜å¡ä½ï¼‰',nav:'æ—­å±±å‹•ç‰©åœ’'},
  {id:'sounkyo',region:'å±¤é›²å³½',name:'ğŸ§Š å±¤é›²å³½å†°ç€‘ç¥­',jp:'æ°·ç€‘ã¾ã¤ã‚Š',images:[IMG_BASE+'sounkyo-1.jpg',IMG_BASE+'sounkyo-2.jpg',IMG_BASE+'sounkyo-3.jpg'],desc:'åŒ—æµ·é“ä¸‰å¤§å†¬ç¥­ï¼ç´„30åº§å†°é›•ï¼Œæ¯æ™š20:00ç…™ç«è¡¨æ¼”ï¼',address:'åŒ—æµ·é“ä¸Šå·éƒ¡ä¸Šå·ç”ºå±¤é›²å³½',hours:'17:00-21:30',price:'Â¥1,000',tips:'æœƒå ´åœ°é¢éå¸¸æ»‘ï¼å‹™å¿…ç©¿é˜²æ»‘é›ªé´ã€‚',nav:'å±¤é›²å³¡æ°·ç€‘ã¾ã¤ã‚Š'},
  {id:'kitakitsune',region:'åŒ—è¦‹',name:'ğŸ¦Š åŒ—ç‹ç‰§å ´',jp:'åŒ—ãã¤ã­ç‰§å ´',images:[IMG_BASE+'kitakitsune-1.jpg',IMG_BASE+'kitakitsune-2.jpg',IMG_BASE+'kitakitsune-3.jpg'],desc:'ç´„60éš»åŒ—æµ·é“ç‹ç‹¸è‡ªç”±æ”¾é¤Šï¼Œå†¬å­£ã€Œå†¬æ¯›ã€æœ€å¯æ„›ï¼',address:'åŒ—æµ·é“åŒ—è¦‹å¸‚ç•™è¾ºè˜‚ç”ºèŠ±ä¸˜52-1',hours:'å†¬å­£9:00-16:00',price:'Â¥500',tips:'ç¦æ­¢è§¸æ‘¸ç‹ç‹¸å’Œé¤µé£Ÿã€‚',nav:'åŒ—ãã¤ã­ç‰§å ´'},
  {id:'akan',region:'é˜¿å¯’æ¹–',name:'ğŸ£ é˜¿å¯’æ¹–å†°ä¸Šé‡£é­š',jp:'ã‚ã‹ã•ãé‡£ã‚Š',images:[IMG_BASE+'akan-1.jpg',IMG_BASE+'akan-2.jpg',IMG_BASE+'akan-3.jpg'],desc:'å†¬å­£é™å®šï¼çµå†°æ¹–é¢é‡£è¥¿å¤ªå…¬é­šï¼Œå¯ç¾å ´æ²¹ç‚¸å“åšã€‚',address:'åŒ—æµ·é“é‡§è·¯å¸‚é˜¿å¯’ç”º',hours:'8:00-16:00',price:'ç´„Â¥1,500',tips:'æ¹–ä¸Šå¾ˆå†·ï¼Œç©¿æœ€ä¿æš–çš„è¡£ç‰©ã€‚',nav:'é˜¿å¯’æ¹–'},
  {id:'rokkatei',region:'å¸¶å»£',name:'ğŸ° å…­èŠ±äº­æœ¬åº—',jp:'å…­èŠ±äº­',images:[IMG_BASE+'rokkatei-1.jpg',IMG_BASE+'rokkatei-2.jpg',IMG_BASE+'rokkatei-3.jpg'],desc:'åŒ—æµ·é“æœ€çŸ¥åç”œé»ï¼æœ¬åº—é™å®šé…¥è„†æ´¾åªæœ‰é€™è£¡åƒå¾—åˆ°ã€‚',address:'åŒ—æµ·é“å¸¶å»£å¸‚è¥¿2æ¡å—9ä¸ç›®',hours:'9:00-18:00',price:'ç´„Â¥500-2000',tips:'é…¥è„†æ´¾è³å‘³æœŸé™åªæœ‰3å°æ™‚ï¼',nav:'å…­èŠ±äº­å¸¯åºƒæœ¬åº—'},
  {id:'snowfes',region:'æœ­å¹Œ',name:'â„ï¸ æœ­å¹Œé›ªç¥­',jp:'ã•ã£ã½ã‚é›ªã¾ã¤ã‚Š',images:[IMG_BASE+'snowfes-1.jpg',IMG_BASE+'snowfes-2.jpg',IMG_BASE+'snowfes-3.jpg'],desc:'æ—¥æœ¬æœ€å¤§è¦æ¨¡é›ªç¥­ï¼å·¨å‹é›ªé›•é«˜é”15å…¬å°ºã€‚',address:'åŒ—æµ·é“æœ­å¹Œå¸‚ä¸­å¤®å€å¤§é€šå…¬åœ’',hours:'å…¨å¤©',price:'å…è²»',tips:'2026å¹´2/4-2/11èˆ‰è¾¦ï¼Œæˆ‘å€‘2/2å¯å…ˆçœ‹æº–å‚™ä¸­çš„é›ªé›•ï¼',nav:'å¤§é€šå…¬åœ’æœ­å¹Œ'}
];

const itinerary=[
  {day:1,date:'1/28(ä¸‰)',title:'æŠµé”ãƒ»å¯Œè‰¯é‡',km:'123km',items:[{time:'06:20',title:'âœˆï¸ å°åŒ—å‡ºç™¼',desc:'è™èˆªIT234'},{time:'10:55',title:'ğŸ›¬ æŠµé”æ–°åƒæ­²'},{time:'11:30',title:'ğŸœ æ©Ÿå ´åˆé¤',type:'meal'},{time:'12:30',title:'ğŸš— å–è»Šå‡ºç™¼',desc:'åŒ—æµ·é“å¥³å©¿'},{time:'15:40',title:'ğŸ§š ç²¾éˆéœ²å°',nav:'ãƒ‹ãƒ³ã‚°ãƒ«ãƒ†ãƒ©ã‚¹'},{time:'17:30',title:'ğŸ¨ å¯Œè‰¯é‡æ‹‰æ¼æ‘',type:'hotel'}]},
  {day:2,date:'1/29(å››)',title:'ç¾ç‘›ãƒ»æ—­å±±',km:'50km',items:[{time:'07:40',title:'ğŸ³ é£¯åº—æ—©é¤',type:'meal'},{time:'09:30',title:'ğŸŒ² ç¾ç‘›åæ¨¹',nav:'ç¾ç‘›ã‚¯ãƒªã‚¹ãƒã‚¹ãƒ„ãƒªãƒ¼'},{time:'11:00',title:'ğŸ§ æ—­å±±å‹•ç‰©åœ’',nav:'æ—­å±±å‹•ç‰©åœ’'},{time:'16:00',title:'ğŸ– æˆå‰æ€æ±—',type:'meal'},{time:'æ™šä¸Š',title:'ğŸ›ï¸ DCMè²·é‹é‡˜'},{time:'ä½å®¿',title:'ğŸ¨ æ—­å·å®¢æ¨‚æ£®',type:'hotel'}]},
  {day:3,date:'1/30(äº”)',title:'å±¤é›²å³½',km:'65km',items:[{time:'07:40',title:'ğŸ³ é£¯åº—æ—©é¤',type:'meal'},{time:'09:00',title:'ğŸš— å‡ºç™¼å±¤é›²å³½'},{time:'14:00',title:'ğŸ¨ å±¤é›²å³½æœé™½äº­',type:'hotel'},{time:'17:00',title:'ğŸ§Š å†°ç€‘ç¥­',nav:'å±¤é›²å³¡æ°·ç€‘ã¾ã¤ã‚Š'},{time:'20:00',title:'ğŸ† ç…™ç«è¡¨æ¼”'}]},
  {day:4,date:'1/31(å…­)',title:'åŒ—ç‹ãƒ»é˜¿å¯’æ¹–',km:'156km',items:[{time:'07:40',title:'ğŸ³ é£¯åº—æ—©é¤',type:'meal'},{time:'10:40',title:'ğŸ¦Š åŒ—ç‹ç‰§å ´',nav:'åŒ—ãã¤ã­ç‰§å ´'},{time:'14:30',title:'ğŸ¨ æ–°é˜¿å¯’é£¯åº—',type:'hotel'},{time:'ä¸‹åˆ',title:'ğŸ˜ï¸ æ„›åŠªæ‘è½',nav:'ã‚¢ã‚¤ãƒŒã‚³ã‚¿ãƒ³'}]},
  {day:5,date:'2/1(æ—¥)',title:'é˜¿å¯’æ¹–ãƒ»åå‹å·',km:'120km',items:[{time:'08:30',title:'ğŸ£ å†°ä¸Šé‡£é­š',nav:'é˜¿å¯’æ¹–'},{time:'12:00',title:'ğŸ· å¸¶å»£è±¬è‚‰è“‹é£¯',type:'meal'},{time:'14:00',title:'ğŸ° å…­èŠ±äº­',nav:'å…­èŠ±äº­å¸¯åºƒæœ¬åº—'},{time:'16:00',title:'ğŸ¨ åå‹å·Tetra',type:'hotel'},{time:'19:00',title:'âœ¨ å½©ç‡ˆç¥­'}]},
  {day:6,date:'2/2(ä¸€)',title:'å‰å¾€æœ­å¹Œ',km:'205km',items:[{time:'07:20',title:'ğŸ³ é£¯åº—æ—©é¤',type:'meal'},{time:'08:40',title:'ğŸš— å‡ºç™¼æœ­å¹Œ'},{time:'15:00',title:'ğŸ¨ æœ­å¹ŒVessel',type:'hotel'},{time:'ä¸‹åˆ',title:'â„ï¸ é›ªç¥­',nav:'å¤§é€šå…¬åœ’'},{time:'18:00',title:'ğŸ¦€ èƒèŸ¹å¤§é¤',type:'meal'}]},
  {day:7,date:'2/3(äºŒ)',title:'æœ­å¹Œãƒ»åƒæ­²',km:'54km',items:[{time:'09:30',title:'ğŸ›ï¸ æœ­å¹Œè³¼ç‰©'},{time:'16:00',title:'â›½ åŠ æ²¹'},{time:'17:30',title:'ğŸ¨ åƒæ­²æ‚ éŠé¤¨',type:'hotel'}]},
  {day:8,date:'2/4(ä¸‰)',title:'è¿”å›å°ç£',km:'7km',items:[{time:'07:40',title:'ğŸ§³ é€€æˆ¿é‚„è»Š'},{time:'08:40',title:'ğŸœ æ©Ÿå ´æ—©é¤',type:'meal'},{time:'11:55',title:'âœˆï¸ èµ·é£›è¿”å°'},{time:'15:35',title:'ğŸ›¬ æŠµé”æ¡ƒåœ’'}]}
];

const phrases=[
  {cat:'driving',jp:'ã‚¬ã‚½ãƒªãƒ³ã‚¹ã‚¿ãƒ³ãƒ‰ã¯ã©ã“ã§ã™ã‹ï¼Ÿ',ro:'Gasorin sutando wa doko desu ka?',zh:'åŠ æ²¹ç«™åœ¨å“ªè£¡ï¼Ÿ'},
  {cat:'driving',jp:'ãƒ¬ã‚®ãƒ¥ãƒ©ãƒ¼æº€ã‚¿ãƒ³ã§',ro:'RegyurÄ mantan de',zh:'è«‹åŠ æ»¿ä¸€èˆ¬æ±½æ²¹'},
  {cat:'restaurant',jp:'å››äººã§ã™',ro:'Yonin desu',zh:'å››å€‹äºº'},
  {cat:'restaurant',jp:'ãŠã™ã™ã‚ã¯ï¼Ÿ',ro:'Osusume wa?',zh:'æ¨è–¦ä»€éº¼ï¼Ÿ'},
  {cat:'restaurant',jp:'ãŠä¼šè¨ˆ',ro:'Okaikei',zh:'è«‹çµå¸³'},
  {cat:'onsen',jp:'æ¸©æ³‰ã¯ã©ã“ã§ã™ã‹ï¼Ÿ',ro:'Onsen wa doko desu ka?',zh:'æº«æ³‰åœ¨å“ªè£¡ï¼Ÿ'},
  {cat:'shopping',jp:'å…ç¨ã§ãã¾ã™ã‹ï¼Ÿ',ro:'Menzei dekimasu ka?',zh:'å¯ä»¥å…ç¨…å—ï¼Ÿ'},
  {cat:'emergency',jp:'åŠ©ã‘ã¦',ro:'Tasukete',zh:'æ•‘å‘½'}
];

function initCarousel(id){
  const c=document.querySelector(`[data-carousel="${id}"]`);if(!c)return;
  const inner=c.querySelector('.carousel-inner'),dots=c.querySelectorAll('.carousel-dot'),counter=c.querySelector('.carousel-counter'),total=c.querySelectorAll('.carousel-slide').length;
  let cur=0;
  function goTo(i){if(i<0)i=total-1;if(i>=total)i=0;cur=i;inner.style.transform=`translateX(-${cur*100}%)`;dots.forEach((d,j)=>d.classList.toggle('active',j===cur));if(counter)counter.textContent=`${cur+1}/${total}`;}
  c.querySelector('.prev')?.addEventListener('click',()=>goTo(cur-1));
  c.querySelector('.next')?.addEventListener('click',()=>goTo(cur+1));
  dots.forEach((d,i)=>d.addEventListener('click',()=>goTo(i)));
  let startX=0;
  inner.addEventListener('touchstart',e=>startX=e.touches[0].clientX);
  inner.addEventListener('touchend',e=>{const diff=startX-e.changedTouches[0].clientX;if(Math.abs(diff)>50)diff>0?goTo(cur+1):goTo(cur-1);});
  setInterval(()=>goTo(cur+1),6000);
}

function init(){
  setupNav();renderDaySelector();renderDay(1);renderHotels();renderSpots();renderTransport();renderPhraseTabs();renderPhrases();renderBudgetPage();renderInfo();
  if(API_URL){document.getElementById('setup-section').innerHTML='';syncData();}else renderSetup();
}

function setupNav(){document.querySelectorAll('.nav-item').forEach(item=>{item.addEventListener('click',()=>{document.querySelectorAll('.nav-item').forEach(i=>i.classList.remove('active'));document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));item.classList.add('active');document.getElementById('page-'+item.dataset.page).classList.add('active');});});}
function renderDaySelector(){document.getElementById('day-selector').innerHTML=itinerary.map(d=>`<div class="day-btn ${d.day===1?'active':''}" onclick="selectDay(${d.day})"><div class="day-btn-num">${d.day}</div><div class="day-btn-date">${d.date.split('(')[0]}</div></div>`).join('');}
function selectDay(day){currentDay=day;document.querySelectorAll('.day-btn').forEach((b,i)=>b.classList.toggle('active',i+1===day));renderDay(day);}
function renderDay(day){const d=itinerary.find(i=>i.day===day);document.getElementById('day-content').innerHTML=`<div class="card"><div class="card-header"><div class="card-title">Day ${d.day} ï½œ ${d.title}</div><div class="card-sub">${d.date} ãƒ» ${d.km}</div></div><div class="card-body"><div class="timeline">${d.items.map(item=>`<div class="tl-item ${item.type||''}"><div class="tl-dot"></div><div class="tl-time">${item.time}</div><div class="tl-title">${item.title}</div>${item.desc?`<div class="tl-desc">${item.desc}</div>`:''}${item.nav?`<a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(item.nav)}" target="_blank" class="tl-link">ğŸ“ å°èˆª</a>`:''}</div>`).join('')}</div></div></div>`;}

function renderHotels(){
  document.getElementById('page-hotels').innerHTML=hotels.map(h=>`
    <div class="hotel-card">
      <div class="carousel" data-carousel="hotel-${h.id}">
        <div class="carousel-inner">${h.images.map((img,i)=>`<div class="carousel-slide"><img src="${img}" alt="${h.name}" onerror="this.parentElement.innerHTML='<div style=\\'display:flex;align-items:center;justify-content:center;height:100%;background:linear-gradient(135deg,#e1bee7,#ce93d8);color:#7b1fa2;font-size:13px;text-align:center;padding:16px\\'>ğŸ“· ä¸Šå‚³åœ–ç‰‡<br>${h.id}-${i+1}.jpg</div>'"></div>`).join('')}</div>
        <button class="carousel-btn prev">â®</button><button class="carousel-btn next">â¯</button>
        <div class="carousel-dots">${h.images.map((_,i)=>`<span class="carousel-dot ${i===0?'active':''}"></span>`).join('')}</div>
        <div class="carousel-counter">1/${h.images.length}</div>
      </div>
      <div class="hotel-header ${h.warn?'warn':''}"><div class="hotel-date">ğŸ“… ${h.date} ${h.nights}</div><div class="hotel-name">${h.name}</div></div>
      <div class="hotel-body">
        <div class="hotel-info">ğŸ·ï¸ ${h.jp}<br>ğŸ“ ${h.location}<br>ğŸ›ï¸ ${h.room}<br>ğŸ“± ${h.booking}${h.extra?`<br>ğŸ’´ ${h.extra}`:''}</div>
        <div class="hotel-desc">${h.desc}</div>
        <div class="hotel-tags">${h.tags.map(t=>`<span class="hotel-tag ${h.warn?'warn':''} ${h.no?'no':''}">${t}</span>`).join('')}</div>
        <div class="hotel-nearby"><div class="hotel-nearby-title">ğŸ“ å‘¨é‚Šè¨­æ–½</div>${h.nearby.map(n=>`<div class="nearby-item"><span class="nearby-icon">${n.icon}</span><span class="nearby-name">${n.name}</span><span class="nearby-dist">${n.dist}</span>${n.nav?`<a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(n.nav)}" target="_blank" class="nearby-nav">å°èˆª</a>`:''}</div>`).join('')}</div>
        <div class="hotel-price"><span class="hotel-price-label">${h.warn?'é ä¼°':'æˆ¿åƒ¹'}</span><span class="hotel-price-value">NT$${h.price.toLocaleString()}</span></div>
        <a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(h.location)}" target="_blank" class="hotel-nav-btn">ğŸ“ å°èˆªåˆ°é£¯åº—</a>
      </div>
    </div>`).join('');
  setTimeout(()=>hotels.forEach(h=>initCarousel('hotel-'+h.id)),100);
}

function renderSpots(){
  document.getElementById('page-spots').innerHTML=spots.map(s=>`
    <div class="spot-card">
      <div class="carousel" data-carousel="spot-${s.id}">
        <div class="carousel-inner">${s.images.map((img,i)=>`<div class="carousel-slide"><img src="${img}" alt="${s.name}" onerror="this.parentElement.innerHTML='<div style=\\'display:flex;align-items:center;justify-content:center;height:100%;background:linear-gradient(135deg,#e3f2fd,#bbdefb);color:#1976d2;font-size:13px;text-align:center;padding:16px\\'>ğŸ“· ä¸Šå‚³åœ–ç‰‡<br>${s.id}-${i+1}.jpg</div>'"></div>`).join('')}</div>
        <button class="carousel-btn prev">â®</button><button class="carousel-btn next">â¯</button>
        <div class="carousel-dots">${s.images.map((_,i)=>`<span class="carousel-dot ${i===0?'active':''}"></span>`).join('')}</div>
        <div class="carousel-counter">1/${s.images.length}</div>
      </div>
      <div class="spot-body">
        <span class="spot-region">${s.region}</span><div class="spot-name">${s.name}</div><div class="spot-jp">${s.jp}</div>
        <div class="spot-desc">${s.desc}</div>
        <div class="spot-info-grid"><div class="spot-info-item"><div class="spot-info-label">ç‡Ÿæ¥­</div><div class="spot-info-value">${s.hours}</div></div><div class="spot-info-item"><div class="spot-info-label">è²»ç”¨</div><div class="spot-info-value">${s.price}</div></div><div class="spot-info-item" style="grid-column:span 2"><div class="spot-info-label">åœ°å€</div><div class="spot-info-value">${s.address}</div></div></div>
        <div class="spot-tips"><div class="spot-tips-title">ğŸ’¡ å°æé†’</div><div class="spot-tips-content">${s.tips}</div></div>
        <a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(s.nav)}" target="_blank" class="spot-nav-btn">ğŸ“ é–‹å•Ÿå°èˆª</a>
      </div>
    </div>`).join('');
  setTimeout(()=>spots.forEach(s=>initCarousel('spot-'+s.id)),100);
}

function renderTransport(){document.getElementById('page-transport').innerHTML=`<div class="trans-box"><div class="trans-title">âœˆï¸ èˆªç­</div><div class="trans-row"><span class="trans-label">å»ç¨‹</span><span class="trans-value">IT234 06:20â†’10:55</span></div><div class="trans-row"><span class="trans-label">å›ç¨‹</span><span class="trans-value">IT235 11:55â†’15:35</span></div><div class="trans-row"><span class="trans-label">ç¸½åƒ¹</span><span class="trans-value red">NT$86,282</span></div></div><div class="trans-box"><div class="trans-title">ğŸš— ç§Ÿè»Š</div><div class="trans-row"><span class="trans-label">å…¬å¸</span><span class="trans-value">åŒ—æµ·é“å¥³å©¿</span></div><div class="trans-row"><span class="trans-label">è»Šå‹</span><span class="trans-value">RAV4</span></div><div class="trans-row"><span class="trans-label">è²»ç”¨</span><span class="trans-value red">Â¥89,600</span></div></div><div class="trans-box"><div class="trans-title">ğŸ—ºï¸ è·¯ç·š</div><table class="route-table"><thead><tr><th>æ—¥</th><th>è·¯ç·š</th><th>km</th></tr></thead><tbody>${itinerary.map(d=>`<tr><td>${d.day}</td><td>${d.title}</td><td>${d.km.replace('km','')}</td></tr>`).join('')}</tbody><tfoot><tr><td colspan="2">ç¸½è¨ˆ</td><td>780km</td></tr></tfoot></table></div>`;}
function renderPhraseTabs(){document.getElementById('phrase-tabs').innerHTML=[{id:'all',label:'å…¨éƒ¨'},{id:'driving',label:'ğŸš—è‡ªé§•'},{id:'restaurant',label:'ğŸ½ï¸é¤å»³'},{id:'onsen',label:'â™¨ï¸æº«æ³‰'},{id:'shopping',label:'ğŸ›ï¸è³¼ç‰©'},{id:'emergency',label:'ğŸ†˜ç·Šæ€¥'}].map(t=>`<div class="phrase-tab ${t.id==='all'?'active':''}" onclick="filterPhrases('${t.id}')">${t.label}</div>`).join('');}
function filterPhrases(cat){currentPhraseFilter=cat;document.querySelectorAll('.phrase-tab').forEach(t=>t.classList.remove('active'));event.target.classList.add('active');renderPhrases();}
function renderPhrases(){const f=currentPhraseFilter==='all'?phrases:phrases.filter(p=>p.cat===currentPhraseFilter);document.getElementById('phrases-list').innerHTML=f.map(p=>`<div class="phrase-card ${p.cat}" onclick="speak('${p.jp}')"><div class="phrase-jp">${p.jp}</div><div class="phrase-romaji">${p.ro}</div><div class="phrase-zh">${p.zh}</div><div class="phrase-play">ğŸ”Š é»æ“Šæ’­æ”¾</div></div>`).join('');}
function speak(t){if('speechSynthesis'in window){const u=new SpeechSynthesisUtterance(t);u.lang='ja-JP';u.rate=0.8;speechSynthesis.speak(u);showToast('ğŸ”Š æ’­æ”¾ä¸­');}}
function renderSetup(){document.getElementById('setup-section').innerHTML=`<div class="setup-card"><div class="setup-title">âš™ï¸ è¨­å®š Google Sheets</div><div class="setup-steps">1. å»ºç«‹ Google Sheet<br>2. æ“´å……åŠŸèƒ½ â†’ Apps Script<br>3. è²¼ä¸Šç¨‹å¼ç¢¼ä¸¦éƒ¨ç½²<br>4. ç¶²å€è²¼åˆ°ä¸‹æ–¹</div><input type="text" class="setup-input" id="api-url" placeholder="è²¼ä¸Šç¶²å€..."><div class="setup-btns"><button class="setup-btn primary" onclick="saveApiUrl()">ğŸ’¾ å„²å­˜</button><button class="setup-btn secondary" onclick="testConnection()">ğŸ”— æ¸¬è©¦</button></div><div class="setup-status" id="setup-status" style="display:none"></div></div>`;}
function renderBudgetPage(){document.getElementById('budget-grid').innerHTML=`<div class="budget-card"><div class="budget-icon">âœˆï¸</div><div class="budget-label">æ©Ÿç¥¨</div><div class="budget-value" id="b-flight">NT$0</div></div><div class="budget-card"><div class="budget-icon">ğŸ¨</div><div class="budget-label">ä½å®¿</div><div class="budget-value" id="b-hotel">NT$0</div></div><div class="budget-card"><div class="budget-icon">ğŸš—</div><div class="budget-label">ç§Ÿè»Š</div><div class="budget-value" id="b-car">Â¥0</div></div><div class="budget-card"><div class="budget-icon">ğŸ½ï¸</div><div class="budget-label">é¤é£²</div><div class="budget-value" id="b-food">NT$0</div></div><div class="budget-card"><div class="budget-icon">ğŸ«</div><div class="budget-label">é–€ç¥¨</div><div class="budget-value" id="b-ticket">NT$0</div></div><div class="budget-card total"><div class="budget-icon">ğŸ’³</div><div class="budget-label">ç¸½è¨ˆ</div><div class="budget-value" id="b-total">NT$0</div></div>`;document.getElementById('expense-cats').innerHTML=[{id:'all',label:'å…¨éƒ¨',bg:'#e3f2fd',c:'#1976d2'},{id:'flight',label:'âœˆï¸',bg:'#e3f2fd',c:'#1976d2'},{id:'hotel',label:'ğŸ¨',bg:'#f3e5f5',c:'#7b1fa2'},{id:'car',label:'ğŸš—',bg:'#e8f5e9',c:'#2e7d32'},{id:'food',label:'ğŸ½ï¸',bg:'#fff3e0',c:'#ef6c00'},{id:'ticket',label:'ğŸ«',bg:'#fce4ec',c:'#c2185b'}].map(c=>`<span class="expense-cat ${c.id==='all'?'active':''}" style="background:${c.bg};color:${c.c}" onclick="filterExpenses('${c.id}')">${c.label}</span>`).join('');}
function filterExpenses(cat){currentExpenseFilter=cat;document.querySelectorAll('.expense-cat').forEach(c=>c.classList.remove('active'));event.target.classList.add('active');renderExpenses();}
function renderExpenses(){const f=currentExpenseFilter==='all'?expenses:expenses.filter(e=>e.category===currentExpenseFilter);const icons={flight:'âœˆï¸',hotel:'ğŸ¨',car:'ğŸš—',food:'ğŸ½ï¸',ticket:'ğŸ«',shopping:'ğŸ›ï¸',other:'ğŸ“¦'};const colors={flight:'#e3f2fd',hotel:'#f3e5f5',car:'#e8f5e9',food:'#fff3e0',ticket:'#fce4ec',shopping:'#e0f7fa',other:'#eceff1'};if(f.length===0){document.getElementById('expense-list').innerHTML='<div class="expense-empty">æ²’æœ‰è¨˜éŒ„</div>';return;}document.getElementById('expense-list').innerHTML=f.map(e=>`<div class="expense-item"><div class="expense-left"><div class="expense-icon" style="background:${colors[e.category]||'#eceff1'}">${icons[e.category]||'ğŸ“¦'}</div><div><div class="expense-desc">${e.description}</div><div class="expense-date">${e.date}</div></div></div><div class="expense-amount ${e.currency.toLowerCase()}">${e.currency==='TWD'?'NT$':'Â¥'}${Number(e.amount).toLocaleString()}</div><button class="expense-delete" onclick="deleteExpense('${e.id}')">ğŸ—‘ï¸</button></div>`).join('');}
function updateBudget(){const rate=0.21;let t={flight:0,hotel:0,car:0,food:0,ticket:0};expenses.forEach(e=>{const amt=e.currency==='TWD'?Number(e.amount):Math.round(Number(e.amount)*rate);if(t[e.category]!==undefined)t[e.category]+=amt;});let carJPY=0;expenses.filter(e=>e.category==='car').forEach(e=>{if(e.currency==='JPY')carJPY+=Number(e.amount);else carJPY+=Math.round(Number(e.amount)/rate);});const total=Object.values(t).reduce((a,b)=>a+b,0);document.getElementById('b-flight').textContent=`NT$${t.flight.toLocaleString()}`;document.getElementById('b-hotel').textContent=`NT$${t.hotel.toLocaleString()}`;document.getElementById('b-car').textContent=`Â¥${carJPY.toLocaleString()}`;document.getElementById('b-food').textContent=`NT$${t.food.toLocaleString()}`;document.getElementById('b-ticket').textContent=`NT$${t.ticket.toLocaleString()}`;document.getElementById('b-total').textContent=`NT$${total.toLocaleString()}`;}
function renderInfo(){document.getElementById('page-info').innerHTML=`<div class="info-card"><div class="info-header">ğŸš¨ ç·Šæ€¥é›»è©±</div><div class="emergency-box"><h4>è­¦å¯Ÿ</h4><p>110</p></div><div class="emergency-box" style="background:#ff6d00"><h4>æ¶ˆé˜²/æ•‘è­·</h4><p>119</p></div></div><div class="info-card"><div class="info-header">ğŸŒ¡ï¸ å¤©æ°£åƒè€ƒ</div><div class="info-body"><div class="info-row"><span class="info-label">å¯Œè‰¯é‡</span><span class="info-value">-15~-5Â°C</span></div><div class="info-row"><span class="info-label">å±¤é›²å³½</span><span class="info-value">-18~-8Â°C</span></div><div class="info-row"><span class="info-label">é˜¿å¯’æ¹–</span><span class="info-value">-20~-10Â°C</span></div><div class="info-row"><span class="info-label">æœ­å¹Œ</span><span class="info-value">-8~0Â°C</span></div></div></div><div class="info-card"><div class="info-header">ğŸ’¡ å¯¦ç”¨è³‡è¨Š</div><div class="info-body"><div class="info-row"><span class="info-label">åŒ¯ç‡</span><span class="info-value">Â¥100â‰ˆNT$21</span></div><div class="info-row"><span class="info-label">é›»å£“</span><span class="info-value">100V</span></div><div class="info-row"><span class="info-label">å…ç¨…</span><span class="info-value">åŒåº—æ»¿Â¥5,000</span></div></div></div><div class="info-card"><div class="info-header">ğŸš— é›ªé§•æ³¨æ„</div><div class="info-body"><div class="info-row"><span class="info-label">é€Ÿåº¦</span><span class="info-value">æ…¢20-30%</span></div><div class="info-row"><span class="info-label">ç…è»Š</span><span class="info-value">ææ—©è¼•è¸©</span></div><div class="info-row"><span class="info-label">åœè»Š</span><span class="info-value">ä¸æ”¾æ‰‹ç…è»Š</span></div></div></div>`;}
function saveApiUrl(){const url=document.getElementById('api-url').value.trim();if(!url){showSetupStatus('è«‹è¼¸å…¥','error');return;}API_URL=url;localStorage.setItem(STORAGE_KEY,url);showSetupStatus('å·²å„²å­˜','success');testConnection();}
async function testConnection(){if(!API_URL){showSetupStatus('è«‹å…ˆè¼¸å…¥','error');return;}updateConnStatus('loading');try{const r=await fetch(`${API_URL}?action=get`);const d=await r.json();if(d.success){isOnline=true;updateConnStatus('online');showSetupStatus(`æˆåŠŸï¼${d.expenses.length}ç­†`,'success');document.getElementById('setup-section').innerHTML='';if(d.expenses.length===0)initDefaultData();else{expenses=d.expenses;renderExpenses();updateBudget();}}else throw new Error();}catch(e){isOnline=false;updateConnStatus('error');showSetupStatus('é€£ç·šå¤±æ•—','error');}}
async function initDefaultData(){try{const r=await fetch(`${API_URL}?action=init`);const d=await r.json();if(d.success){showToast('å·²åˆå§‹åŒ–','success');syncData();}}catch(e){}}
async function syncData(){if(!API_URL)return;document.getElementById('header-sync').classList.add('loading');try{const r=await fetch(`${API_URL}?action=get`);const d=await r.json();if(d.success){expenses=d.expenses;isOnline=true;updateConnStatus('online');renderExpenses();updateBudget();showToast('åŒæ­¥æˆåŠŸ','success');}else throw new Error();}catch(e){isOnline=false;updateConnStatus('error');showToast('åŒæ­¥å¤±æ•—','error');}finally{document.getElementById('header-sync').classList.remove('loading');}}
function updateConnStatus(s){const el=document.getElementById('conn-status');if(s==='online'){el.className='expense-status online';el.innerHTML='<span>ğŸŸ¢</span> å·²é€£ç·š';}else if(s==='error'){el.className='expense-status error';el.innerHTML='<span>ğŸ”´</span> é›¢ç·š';}else{el.className='expense-status offline';el.innerHTML='<span>â³</span> é€£ç·šä¸­...';}}
function showSetupStatus(msg,type){const el=document.getElementById('setup-status');if(el){el.style.display='block';el.className='setup-status '+type;el.textContent=msg;}}
function openModal(){if(!isOnline){showToast('è«‹å…ˆè¨­å®š','error');return;}document.getElementById('modal').classList.add('active');document.getElementById('f-date').value=new Date().toISOString().split('T')[0];}
function closeModal(){document.getElementById('modal').classList.remove('active');}
async function addExpense(e){e.preventDefault();const btn=document.getElementById('submit-btn');btn.disabled=true;btn.textContent='æ–°å¢ä¸­...';const params=new URLSearchParams({action:'add',id:Date.now().toString(),date:document.getElementById('f-date').value,category:document.getElementById('f-cat').value,description:document.getElementById('f-desc').value,currency:document.getElementById('f-cur').value,amount:document.getElementById('f-amt').value});try{const r=await fetch(`${API_URL}?${params}`);const d=await r.json();if(d.success){showToast('æ–°å¢æˆåŠŸ','success');closeModal();document.querySelector('form').reset();syncData();}else throw new Error();}catch(e){showToast('æ–°å¢å¤±æ•—','error');}finally{btn.disabled=false;btn.textContent='æ–°å¢æ¶ˆè²»';}}
async function deleteExpense(id){if(!confirm('ç¢ºå®šåˆªé™¤ï¼Ÿ'))return;try{const r=await fetch(`${API_URL}?action=delete&id=${id}`);const d=await r.json();if(d.success){showToast('å·²åˆªé™¤','success');syncData();}else throw new Error();}catch(e){showToast('åˆªé™¤å¤±æ•—','error');}}
function showToast(msg,type=''){const t=document.getElementById('toast');t.textContent=msg;t.className='toast show '+type;setTimeout(()=>t.className='toast',2500);}
document.getElementById('modal').addEventListener('click',e=>{if(e.target.id==='modal')closeModal();});
document.addEventListener('DOMContentLoaded',init);
</script>
</body>
</html>
